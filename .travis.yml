language: python
sudo: false
cache:
  - pip
python:
  - 2.7
  - 3.5
  - 3.6
install:
  - |
    if [[ $TRAVIS_PYTHON_VERSION == 2* ]]; then
      python2 -m pip install -U pip
      python2 -m pip install --user ipykernel "ipython<6" || python2 -m pip install ipykernel "ipython<6"
      python2 -m ipykernel install --user
    fi
    if [[ $TRAVIS_PYTHON_VERSION == 3* ]]; then
      python -m pip install ipykernel "ipython<=6"
      python -m ipykernel install --user
    fi
    pip install -e .
    pip install pytest
    pip install coverage
script: 
  - pytest -v --maxfail=2 --cov=papermill tests
after_success:
  - coveralls